@model UserModel
@{
    ViewData["Title"] = "Your profile";
}
@section Styles {
    <link rel="stylesheet" href="~/css/Profile.css" />
}
<div class="container-fluid" style="width: 100%; text-align: center; margin: 0;">

    <div class="justify-content-center mr-300 mt-5 width-100proc">
        <div class="row d-block">
            <h2>@Model.FirstName  @Model.LastName (@Model.Username)</h2>
        </div>
        <div class="row d-block">
            @Model.QuestionsCount() questions | @Model.AnswersCount() answers
        </div>
    </div>

    <div>
        <div class="linksToContent mt-5 width-100proc">
            <ul class="nav tab-menu text-center nav-pills">
                <li class="active"><a href="#preferences" data-toggle="tab">Preferences</a></li>
                <li><a href="#forum" data-toggle="tab">Forum</a></li>
            </ul>
        </div>
        <div class="tab-content">
            <div class="tab-pane well active in active" id="preferences">
                <div class="grid6">
                    @{ 
                        var iconList = new ImageModel().GetAllIcons();
                    }
                    @foreach (var i in Model.GetCourseGroups())
                    {
                        <div class="card" style="width: 18rem; text-align:left;">
                            <div class="card-header" style="height: 60px;">
                                <h6 class="card-title">@i["group"]</h6>
                            </div>
                            @{
                                var groupIcon = iconList.Find(icon => icon.ImageId == Convert.ToInt32(i["imageId"].ToString()));
                            } 
                            <img src="@groupIcon.ImageAddress" alt="@i["group"]")/>
                            <div class="card-footer" style="padding: 2px;">
                                <div class="btn btn-primary" style="display: flex; height: 50px; width: 100%; border-radius: 0px; align-items: center; justify-content:center; font-size: 20px;"><a>Add to preferences</a></div>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="tab-pane well fade" id="forum">
                <h6>Questions</h6>
                <table class="table table-striped table-bordered w-100">
                    <thead>
                        <tr>
                            <th data-toggle="tooltip" data-placement="top">Question id</th>
                            <th data-toggle="tooltip" data-placement="top">Question</th>
                            <th data-toggle="tooltip" data-placement="top">Message</th>
                            <th data-toggle="tooltip" data-placement="top">Asked by</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var i in Model.GetUserQuestions(Model.UserId))
                        {
                            <tr>
                                <td>@i["questionId"]</td>
                                <td>@i["question"]</td>
                                <td>@i["message"]</td>
                                <td>@i["userId"]</td>
                                <td><a class="btn btn-primary" asp-controller="Forum" asp-action="ViewQuestion" asp-route-id="@i["questionId"]">View question</a></td>
                            </tr>
                        }
                    </tbody>
                </table>
                <h6>Answered Questions</h6>
                <table class="table table-striped table-bordered w-100">
                    <thead>
                        <tr>
                            <th data-toggle="tooltip" data-placement="top">Question id</th>
                            <th data-toggle="tooltip" data-placement="top">Question</th>
                            <th data-toggle="tooltip" data-placement="top">Message</th>
                            <th data-toggle="tooltip" data-placement="top">Asked by</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var i in Model.GetUserRepliedQuestions(Model.UserId))
                        {
                            <tr>
                                <td>@i["questionId"]</td>
                                <td>@i["question"]</td>
                                <td>@i["message"]</td>
                                <td>@i["userId"]</td>
                                <td><a class="btn btn-primary" asp-controller="Forum" asp-action="ViewQuestion" asp-route-id="@i["questionId"]">View question</a></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
